<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Add Book</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<h2>Add Book</h2>
<button id="theme-toggle">üåô Dark mode</button>

<!-- Flash Messages -->
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="flash-messages">
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<form method="POST">
  <label>Title</label>
  <input type="text" name="title" required>

  <label>ISBN</label>
  <input type="text" name="isbn" required>

  <label>Publication Year</label>
  <input type="number" name="publication_year" required>

  <label>Author</label>
  <select name="author_id" required>
    <option value="">-- Select author --</option>
    {% for author in authors %}
      <option value="{{ author.id }}">{{ author.name }}</option>
    {% endfor %}
  </select>

  <input type="submit" value="Add Book">
</form>

<p><a href="/">Back to Home</a></p>

<script>
  const toggleBtn = document.getElementById("theme-toggle");
  const savedTheme = localStorage.getItem("theme");

  if (savedTheme === "dark") {
    document.documentElement.setAttribute("data-theme", "dark");
    toggleBtn.textContent = "‚òÄÔ∏è Light mode";
  }

  toggleBtn.addEventListener("click", () => {
    const dark = document.documentElement.getAttribute("data-theme") === "dark";
    if (dark) {
      document.documentElement.removeAttribute("data-theme");
      localStorage.setItem("theme", "light");
      toggleBtn.textContent = "üåô Dark mode";
    } else {
      document.documentElement.setAttribute("data-theme", "dark");
      localStorage.setItem("theme", "dark");
      toggleBtn.textContent = "‚òÄÔ∏è Light mode";
    }
  });
</script>

</body>
</html>
